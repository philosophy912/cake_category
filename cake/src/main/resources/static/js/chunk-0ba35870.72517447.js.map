{"version":3,"sources":["webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.number.to-fixed.js","webpack:///./src/views/Material.vue?14f9","webpack:///./src/components/material/dialog.vue?d67a","webpack:///./src/components/material/form.vue?464d","webpack:///./src/utils/validate.js","webpack:///src/components/material/form.vue","webpack:///./src/components/material/form.vue?256f","webpack:///./src/components/material/form.vue","webpack:///src/components/material/dialog.vue","webpack:///./src/components/material/dialog.vue?b6b2","webpack:///./src/components/material/dialog.vue","webpack:///./src/components/material/table.vue?c1d1","webpack:///src/components/material/table.vue","webpack:///./src/components/material/table.vue?c376","webpack:///./src/components/material/table.vue","webpack:///src/views/Material.vue","webpack:///./src/views/Material.vue?dbde","webpack:///./src/views/Material.vue","webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.array.index-of.js","webpack:///./node_modules/_core-js@3.6.4@core-js/internals/this-number-value.js","webpack:///./node_modules/_core-js@3.6.4@core-js/internals/string-repeat.js"],"names":["$","toInteger","thisNumberValue","repeat","fails","nativeToFixed","toFixed","floor","Math","pow","x","n","acc","log","x2","FORCED","call","target","proto","forced","fractionDigits","e","z","j","k","number","this","fractDigits","data","sign","result","multiply","c","index","c2","divide","dataToString","s","t","String","length","RangeError","slice","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","materials","envData","on","handleSizeChange","handleCurrentChange","del","add","modify","search","dialog","closeDialog","staticRenderFns","title","show","$event","$set","row","slot","cancle","_v","_s","left","confirm","right","rules","model","value","callback","$$v","expression","regexMatch","Logger","str","regex","RegExp","test","isPriceValid","rule","content","must","Error","label","isIntegerValid","isCapacityTypeValid","capacityType","indexOf","count","component","staticStyle","scopedSlots","_u","key","fn","scope","_e","pageNo","pageSize","totalRows","name","props","type","Array","Object","computed","showTable","methods","$emit","val","mounted","getData","beforeRouteEnter","next","vm","components","MaterialDialog","MaterialForm","MaterialTable","watch","newVal","formulas","capacity","unit","price","pricePerCapacity","totalPages","id","$confirm","confirmButtonText","cancelButtonText","$tools","deepClone","isEmpty","respData","$indexOf","arrayMethodIsStrict","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","searchElement","apply","arguments","undefined","classof","module","exports","TypeError","requireObjectCoercible","Infinity"],"mappings":"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","file":"js/chunk-0ba35870.72517447.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.github.io/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line max-statements\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    var multiply = function (n, c) {\n      var index = -1;\n      var c2 = c;\n      while (++index < 6) {\n        c2 += n * data[index];\n        data[index] = c2 % 1e7;\n        c2 = floor(c2 / 1e7);\n      }\n    };\n\n    var divide = function (n) {\n      var index = 6;\n      var c = 0;\n      while (--index >= 0) {\n        c += data[index];\n        data[index] = floor(c / n);\n        c = (c % n) * 1e7;\n      }\n    };\n\n    var dataToString = function () {\n      var index = 6;\n      var s = '';\n      while (--index >= 0) {\n        if (s !== '' || index === 0 || data[index] !== 0) {\n          var t = String(data[index]);\n          s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n        }\n      } return s;\n    };\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        result = dataToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        result = dataToString() + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"material\"},[_c('MaterialTable',{attrs:{\"data\":_vm.materials,\"envData\":_vm.envData},on:{\"handleSizeChange\":_vm.handleSizeChange,\"handleCurrentChange\":_vm.handleCurrentChange,\"del\":_vm.del,\"add\":_vm.add,\"modify\":_vm.modify,\"search\":_vm.search}}),_c('MaterialDialog',{attrs:{\"dialog\":_vm.dialog},on:{\"closeDialog\":_vm.closeDialog}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dialog\"},[_c('el-dialog',{attrs:{\"title\":_vm.dialog.title,\"visible\":_vm.dialog.show,\"show-close\":false},on:{\"update:visible\":function($event){return _vm.$set(_vm.dialog, \"show\", $event)}}},[_c('Form',{attrs:{\"row\":_vm.dialog.row}}),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.cancle()}}},[_vm._v(_vm._s(_vm.dialog.left))]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.confirm()}}},[_vm._v(_vm._s(_vm.dialog.right)+\" \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form\"},[_c('el-form',{attrs:{\"model\":_vm.row,\"status-icon\":\"\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"label-width\":\"100px\",\"required\":\"\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.row.name),callback:function ($$v) {_vm.$set(_vm.row, \"name\", $$v)},expression:\"row.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"容量\",\"label-width\":\"100px\",\"required\":\"\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.row.capacity),callback:function ($$v) {_vm.$set(_vm.row, \"capacity\", $$v)},expression:\"row.capacity\"}})],1),_c('el-form-item',{attrs:{\"label\":\"容量单位\",\"label-width\":\"100px\",\"required\":\"\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.row.unit),callback:function ($$v) {_vm.$set(_vm.row, \"unit\", $$v)},expression:\"row.unit\"}})],1),_c('el-form-item',{attrs:{\"label\":\"单价\",\"label-width\":\"100px\",\"required\":\"\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.row.price),callback:function ($$v) {_vm.$set(_vm.row, \"price\", $$v)},expression:\"row.price\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Logger from 'chivy';\n\nconst log = new Logger('utils/validate');\nconst regexMatch = (str, regex) => new RegExp(regex).test(str);\n// 账号校验，不能有特殊字符\nexport const isNameValid = (rule, value, callback) => {\n  log.debug('value content is ' + value.content);\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^[a-zA-Z0-9_\\u4e00-\\u9fa5\\\\s·]+$')) {\n    callback(new Error('分类不能有特殊字符'));\n  } else {\n    callback();\n  }\n};\n// 价格校验\nexport const isPriceValid = (rule, value, callback) => {\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^([1-9][0-9]*)+(.[0-9]{1,2})?$')) {\n    callback(new Error('请输入正确的' + value.label));\n  } else {\n    callback();\n  }\n};\n// 正整数校验\nexport const isIntegerValid = (rule, value, callback) => {\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^[+]{0,1}(\\\\d+)$')) {\n    callback(new Error('请输入正确的' + value.label));\n  } else {\n    callback();\n  }\n};\n\n// 选择项校验\nexport const isSelectValid = (rule, value, callback) => {\n  if (value.content === '') {\n    value.must ? callback(new Error('请选择' + value.label)) : callback();\n  } else {\n    callback();\n  }\n};\n\n// 手机号码校验\nexport const isMobileValid = (rule, value, callback) => {\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\\\\d{8}$')) {\n    callback(new Error('请输入正确的手机号码'));\n  } else {\n    callback();\n  }\n};\n// 电子邮箱校验\nexport const isEmailValid = (rule, value, callback) => {\n  log.debug('value content is ' + value.content);\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}$')) {\n    callback(new Error('请输入正确的电子邮箱'));\n  } else {\n    callback();\n  }\n};\n// 折扣校验\nexport const isDiscountValid = (rule, value, callback) => {\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^0.[0-9]{1,2}')) {\n    callback(new Error('请输入正确折扣数字'));\n  } else {\n    callback();\n  }\n};\n\n// 密码校验\nexport const isPwdValid = (rule, value, callback) => {\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$')) {\n    callback(new Error('请输入正确密码'));\n  } else {\n    callback();\n  }\n};\n// 日期校验\nexport const isDateValid = (rule, value, callback) => {\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (!regexMatch(value.content, '^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$')) {\n    callback(new Error('请输入正确密码'));\n  } else {\n    callback();\n  }\n};\n\n// 日期校验\nexport const isCapacityTypeValid = (rule, value, callback) => {\n  const capacityType = ['克', '千克', '个', '毫升', '升', '片'];\n  if (value.content === '') {\n    value.must ? callback(new Error('请输入' + value.label)) : callback();\n  } else if (capacityType.indexOf(value.count) == -1) {\n    callback(new Error('请输入容量单位'));\n  } else {\n    callback();\n  }\n};\n","<template>\n  <div class=\"form\">\n    <el-form :model=\"row\" status-icon :rules=\"rules\">\n      <el-form-item label=\"名称\" label-width=\"100px\" required>\n        <el-input v-model=\"row.name\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"容量\" label-width=\"100px\" required>\n        <el-input v-model=\"row.capacity\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"容量单位\" label-width=\"100px\" required>\n        <el-input v-model=\"row.unit\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"单价\" label-width=\"100px\" required>\n        <el-input v-model=\"row.price\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <!-- <el-form-item label=\"每单位价格\" label-width=\"100px\" >\n        <el-input :value=\"pricePerCapacity(row.price, row.capacity)\" autocomplete=\"off\" :disabled=\"true\"></el-input>\n      </el-form-item> -->\n    </el-form>\n  </div>\n</template>\n<script>\n  import {\n    isNameValid,\n    isIntegerValid,\n    isCapacityTypeValid,\n    isPriceValid\n  } from '@/utils/validate';\n  import Logger from 'chivy';\n\n  const log = new Logger('components/material/form');\n  export default {\n    name: 'MaterialForm',\n    data() {\n      return {\n        // 校验数据\n        rules: {\n          name: [\n            { required: true, message: '请输入活动名称', trigger: 'blur' }\n            // { validator: isNameValid, trigger: 'blur' }\n          ],\n          capacity: [{\n            validator: isIntegerValid,\n            message: '请输入名称',\n            trigger: 'blur'\n          }],\n          capacityType: [{ validator: isCapacityTypeValid, trigger: 'blur' }],\n          price: [{ validator: isPriceValid, trigger: 'blur' }]\n        }\n      };\n    },\n    methods: {\n      pricePerCapacity(price, capacity) {\n        if (this.$tools.isNotEmpty(price) && this.$tools.isNotEmpty(capacity)) {\n          return (price / capacity).toFixed(4);\n        }\n        return 0.0;\n      }\n    },\n    props: {\n      row: {\n        type: Object\n      }\n    }\n  };\n</script>\n<style lang=\"stylus\" scoped></style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./form.vue?vue&type=template&id=865d2794&scoped=true&\"\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"865d2794\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"dialog\">\n    <el-dialog :title=\"dialog.title\" :visible.sync=\"dialog.show\"\n               :show-close=\"false\">\n      <Form :row=\"dialog.row\"></Form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancle()\">{{dialog.left}}</el-button>\n        <el-button type=\"primary\" @click=\"confirm()\">{{dialog.right}}\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n  import { updateMaterial, addMaterial } from '@/api/materials';\n  import Form from '@/components/material/form';\n  import Logger from 'chivy';\n\n  const log = new Logger('components/material/dialog');\n  export default {\n    name: 'MaterialDialog',\n    components: {\n      Form\n    },\n    props: {\n      dialog: {\n        type: Object\n      }\n    },\n    methods: {\n      cancle() {\n        log.info('cancle button on');\n        this.closeDialog();\n      },\n      confirm() {\n        log.info('config button on and send data to background');\n        log.debug('button value is' + JSON.stringify(this.dialog.right));\n        const data = {\n          name: this.dialog.row.name,\n          price: this.dialog.row.price,\n          capacity: this.dialog.row.capacity,\n          unit: this.dialog.row.unit\n        };\n        if (this.dialog.right === '保存') {\n          data.id = this.dialog.row.id,\n            updateMaterial(data).then(() => {\n              this.$message.success('更新原材料[' + data.name + ']成功');\n            });\n        } else if (this.dialog.right === '新增') {\n          addMaterial(data).then(() => {\n            this.$message.success('添加原材料[' + data.name + ']成功');\n          });\n        }\n        this.closeDialog();\n      },\n      closeDialog() {\n        log.info('material Dialog closeDialog');\n        this.$emit('closeDialog');\n      }\n    }\n  };\n</script>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dialog.vue?vue&type=template&id=704503f5&\"\nimport script from \"./dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"table\"},[(_vm.showTable)?_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.data,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"fixed\":\"\",\"prop\":\"name\",\"label\":\"名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"capacity\",\"label\":\"容量\"}}),_c('el-table-column',{attrs:{\"prop\":\"unit\",\"label\":\"容量单位\"}}),_c('el-table-column',{attrs:{\"prop\":\"price\",\"label\":\"单价\"}}),_c('el-table-column',{attrs:{\"prop\":\"pricePerUnit\",\"label\":\"每单位价格(元)\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"header\",fn:function(scope){return [_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"输入关键字搜索\"},on:{\"change\":function($event){return _vm.search()}},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.search()}},slot:\"append\"})],1)]}},{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.modify(scope.row)}}},[_vm._v(\"修改 \")]),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\",\"icon\":\"el-icon-document-add\"},on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"新增 \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\",\"icon\":\"el-icon-document-add\"},on:{\"click\":function($event){return _vm.del(scope.row)}}},[_vm._v(\"删除 \")])]}}],null,false,2294724305)})],1):_vm._e(),_c('el-pagination',{attrs:{\"current-page\":_vm.envData.pageNo,\"page-sizes\":[5, 10, 20, 50],\"page-size\":_vm.envData.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.envData.totalRows},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"table\">\r\n    <el-table :data=\"data\" border style=\"width: 100%\" v-if=\"showTable\">\r\n      <el-table-column fixed prop=\"name\" label=\"名称\"></el-table-column>\r\n      <el-table-column prop=\"capacity\" label=\"容量\"></el-table-column>\r\n      <el-table-column prop=\"unit\" label=\"容量单位\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"单价\"></el-table-column>\r\n      <el-table-column prop=\"pricePerUnit\" label=\"每单位价格(元)\"></el-table-column>\r\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"300\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n          <el-input v-model=\"content\" size=\"mini\" placeholder=\"输入关键字搜索\" @change=\"search()\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"search()\" />\r\n          </el-input>\r\n        </template>\r\n        <template slot-scope=\"scope\">\r\n          <el-button @click=\"modify(scope.row)\" type=\"primary\" size=\"small\" icon=\"el-icon-edit\">修改\r\n          </el-button>\r\n          <el-button @click=\"add()\" type=\"success\" size=\"small\" icon=\"el-icon-document-add\">新增\r\n          </el-button>\r\n          <el-button @click=\"del(scope.row)\" type=\"danger\" size=\"small\" icon=\"el-icon-document-add\">删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"envData.pageNo\" :page-sizes=\"[5, 10, 20, 50]\" :page-size=\"envData.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\" :total=\"envData.totalRows\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Logger from 'chivy';\r\n\r\nconst log = new Logger('components/material/table');\r\nexport default {\r\n  name: 'MaterialTable',\r\n  data() {\r\n    return {\r\n      content: ''\r\n    };\r\n  },\r\n  props: {\r\n    data: {\r\n      type: Array\r\n    },\r\n    envData: {\r\n      type: Object\r\n    }\r\n  },\r\n  computed: {\r\n    showTable() {\r\n      return this.data.length != 0;\r\n    }\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      log.debug(`每页${val}条`);\r\n      this.$emit('handleSizeChange', val)\r\n    },\r\n    handleCurrentChange(val) {\r\n      log.debug(`当前页: ${val}`);\r\n      this.$emit('handleCurrentChange', val)\r\n    },\r\n    modify(row) {\r\n      log.debug('execute modify action in row');\r\n      this.$emit('modify', row);\r\n    },\r\n    add() {\r\n      log.debug('execute add action in row');\r\n      this.$emit('add');\r\n    },\r\n    del(row) {\r\n      log.debug('execute del action in row');\r\n      this.$emit('del', row);\r\n    },\r\n    search() {\r\n      log.debug('it will search content[' + this.content + ']');\r\n      this.$emit('search', this.content);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"stylus\" scoped></style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./table.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./table.vue?vue&type=template&id=f6585da4&scoped=true&\"\nimport script from \"./table.vue?vue&type=script&lang=js&\"\nexport * from \"./table.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f6585da4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"material\">\r\n    <MaterialTable :data=\"materials\" :envData=\"envData\" @handleSizeChange=\"handleSizeChange\" @handleCurrentChange=\"handleCurrentChange\" @del=\"del\" @add=\"add\" @modify=\"modify\" @search=\"search\">\r\n    </MaterialTable>\r\n    <MaterialDialog :dialog=\"dialog\" @closeDialog=\"closeDialog\"></MaterialDialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Logger from 'chivy';\r\nimport { queryMaterials, queryMaterialByName, delMaterial } from '@/api/materials';\r\nimport MaterialDialog from '@/components/material/dialog.vue';\r\nimport MaterialForm from '@/components/material/form.vue';\r\nimport MaterialTable from '@/components/material/table.vue';\r\n\r\nconst log = new Logger('views/material');\r\nexport default {\r\n  name: 'Material',\r\n  mounted() {\r\n    this.getData();\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    next(vm => {\r\n      log.debug('beforeRouteEnter to path is ' + to.path);\r\n      vm.getData();\r\n    });\r\n  },\r\n  components: {\r\n    MaterialDialog,\r\n    MaterialForm,\r\n    MaterialTable\r\n  },\r\n  watch: {\r\n    materials(newVal, oldVal) {\r\n      if (newVal.length == 0) {\r\n        this.add();\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      materials: [],\r\n      dialog: {\r\n        title: '',\r\n        show: false,\r\n        formulas: '',\r\n        row: '',\r\n        left: '取消',\r\n        right: ''\r\n      },\r\n      row: {\r\n        name: '',\r\n        capacity: '',\r\n        unit: '克',\r\n        price: '',\r\n        pricePerCapacity: ''\r\n      },\r\n      envData: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        totalRows: 0,\r\n        totalPages: 0\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    handleSizeChange(val) {\r\n      this.envData.pageSize = val;\r\n      this.getData();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.envData.pageNo = val;\r\n      this.getData();\r\n    },\r\n    getData() {\r\n      const data = {\r\n        envData: this.envData\r\n      };\r\n      queryMaterials(data).then(resp => {\r\n        this.materials = resp.data;\r\n        this.envData = resp.envData;\r\n      });\r\n    },\r\n    del(row) {\r\n      log.debug('row = ' + JSON.stringify(row));\r\n      const data = {\r\n        id: row.id\r\n      };\r\n      this.$confirm('此操作将删除[' + row.name + '], 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          delMaterial(data)\r\n            .then(() => {\r\n              this.$message.success('成功删除原材料[' + row.name + ']');\r\n              this.getData();\r\n            })\r\n            .catch(() => {\r\n              this.$message.error('删除原材料[' + row.name + ']失败，请检查是否有中级产品或者基础产品使用了该原材料');\r\n            });\r\n        })\r\n        .catch(() => {\r\n          log.debug('已取消删除[' + row.name + ']');\r\n        });\r\n    },\r\n    add() {\r\n      log.debug('add new in table');\r\n      this.dialog.show = true;\r\n      this.dialog.title = '新增原材料';\r\n      this.dialog.right = '新增';\r\n      this.dialog.row = this.row;\r\n    },\r\n    closeDialog() {\r\n      this.dialog.show = false;\r\n    },\r\n    modify(row) {\r\n      log.debug('modify current row');\r\n      this.dialog.show = true;\r\n      this.dialog.title = '修改';\r\n      this.dialog.right = '保存';\r\n      this.dialog.row = this.$tools.deepClone(row);\r\n    },\r\n    search(content) {\r\n      log.debug('execute method search');\r\n      log.debug('it will search ' + content);\r\n      // 直接过滤数据，如果content为空的时候，表示查询所有数据，需要从数据库再次获取数据，然后显示\r\n      if (!this.$tools.isEmpty(content)) {\r\n        const data = {\r\n          name: content,\r\n          envData: this.envData\r\n        };\r\n        queryMaterialByName(data).then(resp => {\r\n          const respData = resp.data\r\n          if (respData.length !== 0) {\r\n            this.materials = respData;\r\n            this.envData = resp.envData\r\n          } else {\r\n            this.$message.error('没有找到原材料[' + content + ']');\r\n          }\r\n        });\r\n      } else {\r\n        const data = {\r\n          envData: this.envData\r\n        };\r\n        queryMaterials(data).then(resp => {\r\n          this.materials = resp.data;\r\n          this.envData = resp.envData;\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Material.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./Material.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Material.vue?vue&type=template&id=29c2f958&\"\nimport script from \"./Material.vue?vue&type=script&lang=js&\"\nexport * from \"./Material.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n"],"sourceRoot":""}